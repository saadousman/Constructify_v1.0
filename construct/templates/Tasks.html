{% extends 'base.html' %}


{% block title%}
Task Management
{%endblock%}


{% block content%}


{% include 'includes/delayModal.html' %}
<div class="row" style="margin-top:20px;margin-left:30px">
    <div class="col-2">
        <div class="card text-white bg-secondary mb-3" style="max-width: 18rem;">

            <div class="card-body">
                <h5 class="card-title">Pending EOTs</h5>
                <p class="card-text" style="text-align:center;">{{pending_delays}}</p>
            </div>
        </div>
    </div>

    <div class="col-2">
        <div class="card text-white bg-success mb-3" style="max-width: 18rem;">

            <div class="card-body">
                <h5 class="card-title">Approved EOTs</h5>
                <p class="card-text" style="text-align:center;">{{approved_delays}}</p>
            </div>
        </div>
    </div>

    <div class="col-2">
        <div class="card text-white bg-warning  mb-3" style="max-width: 18rem;">

            <div class="card-body">
                <h5 class="card-title">Delays Reported</h5>
                <p class="card-text" style="text-align:center;">{{delay_count}}</p>
            </div>
        </div>
    </div>





</div>


<div class="row" style="margin-top:20px;margin-left:30px">
    <div class="col-11">
        <h3>Task Management</h3>
        <p>Managing Project Tasks</p>
        <br>
        <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#exampleModal"
            data-whatever="@mdo">Create a New Record</button>
        <br><br><br>


        <table class="table table-striped table-dark">



            <thead>
                <tr>
                    <!-- Your Columns HERE -->
                    <th scope="col">ID</th>
                    <th scope="col">Name</th>
                    <th width="20% scope="col">Description</th>
                    <th  width="10% scope="col">Percentage</th>
                    <th scope="col">Phase</th>
                    <th scope="col">Start Date</th>
                    <th scope="col">End Date</th>
                    <th scope="col">Estimated Cost</th>
                    <th scope="col">Status</th>
                </tr>
            </thead>
            <tbody>
                <!-- Your rows inside the table HERE: -->

                {% for task in tasks %}

                {% include 'includes/newdeletemodal.html'  %}
                {% include 'includes/approveeotmodal.html' %}





                <tr>
                    <td>{{task.id}}</td>
                    <td>{{task.Name}}</td>
                    <td width="20%">{{task.description}}</td>
                    <td>{{task.phase}}</td>
                    <td width="5%">{{task.Percentage}}</td>
                    <td>{{task.start_date}}</td>
                    <td>{{task.end_date}}</td>
                    <td>{{task.status}}</td>
                    <td>{{task.total_estimated_cost}}</td>

                    <!-- Change Badge color based on Delay Deverity -->
                    

                    <td>

                        <a class="btn btn-outline-danger" href="{{url_for('delete',id=delay.id)}}" role="button">Delete</a>

                            <a class="btn btn-outline-success" href="{{url_for('approveEOT', id=delay.id)}}" role="button">Approve EOT</a>
                        <a href="https://drive.google.com/drive/folders/18PSp9SP4vlClrRaxsXw4nqbLmEu5UW7g?usp=sharing"
                            target="_blank" class="btn btn-outline-primary" role="button" aria-pressed="true">Submit EOT Docs</a>


                    </td>
                </tr>
                
                {% endfor %}
            </tbody>
        </table>


    </div>


</div>

</div>

{% endblock %}